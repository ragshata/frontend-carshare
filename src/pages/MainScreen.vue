<template>
  <div class="container">
    <!-- –ú–æ–∂–µ—à—å –æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–ª–∏ –ª–æ–≥–æ, –∞ –∫–Ω–æ–ø–æ–∫ –Ω–µ –±—É–¥–µ—Ç -->
    <h2 style="text-align:center;margin-top:60px;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ CarShare TJ!</h2>
    <p style="text-align:center;">–î–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª—å—à—É—é –∫–Ω–æ–ø–∫—É Telegram –≤–Ω–∏–∑—É üëá</p>
  </div>
</template>

<script setup lang="ts">
import { onMounted, onBeforeUnmount } from 'vue';
import { useRouter } from 'vue-router';

const router = useRouter();

onMounted(() => {
  const tg = (window as any).Telegram?.WebApp;
  if (!tg) return;

  tg.ready();
  tg.MainButton.setText('üöó –ù–∞–π—Ç–∏ –ø–æ–µ–∑–¥–∫—É');
  tg.MainButton.setParams({ color: '#007bff', text_color: '#ffffff' });
  tg.MainButton.show();

  // –°–ª—É—à–∞–µ–º –∫–ª–∏–∫ ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω—É–∂–Ω—ã–π —ç–∫—Ä–∞–Ω
  const handleClick = () => {
    router.push('/find-trip');
  };
  tg.MainButton.onClick(handleClick);

  // –ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –º–µ–Ω—è–π MainButton –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–π beforeEach)
});

onBeforeUnmount(() => {
  const tg = (window as any).Telegram?.WebApp;
  tg?.MainButton?.hide();
  tg?.MainButton?.offClick?.();
});
</script>

<style scoped>
/* –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω */
</style>
